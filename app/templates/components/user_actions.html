{% macro render_actions(user, current_user) %}
<div
	class="d-flex flex-wrap flex-sm-column flex-md-row align-items-center justify-content-center justify-content-sm-start gap-2">
	{% if user.id != current_user.id %} {% if user in current_user.friends %}
	<button
		class="btn btn-primary msg-btn"
		onclick='redirectToMsg("{{ user.username }}")'>
		<i class="fa-regular fa-message me-1 small"></i>
		<span class="small">Message</span>
	</button>
	<button
		class="btn btn-outline-secondary"
		data-bs-toggle="modal"
		data-bs-target="#removeFriend-{{ user.username }}"
		data-user-username="{{ user.username }}">
		<i class="fa-solid fa-trash me-1 small"></i>
		<span class="small">Remove</span>
	</button>
	{% elif user in current_user.pending_requests %}
	<button class="btn btn-secondary add-btn" disabled>
		<i class="fa-solid fa-clock me-1 small"></i>
		<span class="small">Pending</span>
	</button>
	{% elif user in current_user.received_requests %}
	<button
		class="btn btn-primary accept-btn"
		data-user-username="{{ user.username }}">
		<i class="fa-solid fa-user-check me-1 small"></i>
		<span class="small">Accept</span>
	</button>
	<button
		class="btn btn-outline-danger decline-btn"
		data-user-username="{{ user.username }}">
		<i class="fa-solid fa-x me-1 small"></i>
		<span class="small">Decline</span>
	</button>
	{% else %}
	<button
		class="btn btn-outline-primary add-btn"
		data-user-username="{{ user.username }}">
		<i class="fas fa-plus me-1 small"></i>
		<span class="small">Add friend</span>
	</button>
	{% endif %} {% endif %}
</div>
<script></script>
{% endmacro %}

<!-- Delete friend modal -->
{% macro render_delete_modal(user) %}
<div
	class="modal fade"
	data-user-username="{{ user.username }}"
	tabindex="-1"
	id="removeFriend-{{ user.username }}"
	aria-labelledby="removeFriendLabel-{{ user.username }}"
	aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="container">
				<div class="modal-header">
					<h5
						class="modal-title"
						id="removeFriendLabel-{{ user.username }}">
						Remove Friend?
					</h5>
					<button
						type="button"
						class="btn-close"
						data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Are you sure you want to remove this user from your friends?
				</div>
				<div class="modal-footer">
					<button
						type="button"
						class="btn btn-secondary"
						data-bs-dismiss="modal">
						Cancel
					</button>
					<button type="button" class="btn btn-danger remove-btn">
						Remove
					</button>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	function redirectToMsg(username) {
		event.preventDefault();

		window.location.href = `/messages/${username}`
	}
</script>
{% endmacro %}
